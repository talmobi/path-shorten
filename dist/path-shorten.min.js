!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pathShorten=e()}}(function(){return function i(f,l,s){function u(n,e){if(!l[n]){if(!f[n]){var r="function"==typeof require&&require;if(!e&&r)return r(n,!0);if(c)return c(n,!0);var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}var o=l[n]={exports:{}};f[n][0].call(o.exports,function(e){return u(f[n][1][e]||e)},o,o.exports,i,f,l,s)}return l[n].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({1:[function(e,n,r){"use strict";var t=!1;try{t=e("os").homedir()}catch(e){}function g(e){process.env.debug_path_shorten&&console.log(e)}var l={home:!0,homedir:t,length:3};n.exports=function(e,p){p=Object.assign({},l,p||{});var o=e,i="";function n(){var e=o.match(/\s+/);if(e){var n=e[0],r=e.index;if(0<r){var t=o.slice(0,r);o=o.slice(t.length+n.length),i+=f(t)+n}else{if(0!==r)throw new Error("no match found should have already been handled bfore reaching here");o=o.slice(n.length),i+=n}}else o&&(i+=f(o)),o="";return o}for(p.length||(p.length=3),p.length<1&&(p.length=3),p.home&&p.homedir&&(o=e.split(p.homedir).join("~"));n(););function f(e){if("function"==typeof p.processWord)return p.processWord(e);if(0<=e.indexOf("/")||0<=e.indexOf("\\")){g("word: "+(e=e.split("\\\\").join("/")));for(var n="";e[0].match(/['"]/);)n+=e[0],e=e.slice(1);if(0<e.indexOf(":/")){for(var r=e.indexOf(":/"),t=e.slice(0,r),o=t;!o[0].match(/[a-zA-Z]/);)g("drive: "+(o=t.slice(t.length-o.length+1)));var i="string"==typeof o&&o.match(/[a-zA-Z]/);-1===t.indexOf("/")&&i&&(n+=o.toLowerCase()+"/",e=e.slice(r+2))}var f=e.split("/");if(1<f.length){var l=f.shift(),s=f.join("/");e=l+"/"+(a=s.split("/"),d=[],a.forEach(function(e){".."===e?d.pop():"."===e||e&&d.push(e)}),d.join("/"))}for(;1<e.length&&"/"===e[e.length-1];)e=e.slice(0,-1);if("function"==typeof p.pre)return p.pre(n+e);var u=e.split("/"),c=u.pop(),h="";return u.forEach(function(e){if(e){if(0<=e.indexOf(":"))return h+=e+"/";var n,r=p.length;for("~"!==e[0]&&"."!==e[0]||(r+=1),r>e.length&&(r=e.length),n=0;n<r;n++)h+=e[n];h+="/"}}),"/"===e[0]&&h[0]!==e[0]&&(h="/"+h),n&&(h=n+h),"function"==typeof p.post?p.post(h+c):h+c}var a,d;return e}return i}},{os:void 0}]},{},[1])(1)});