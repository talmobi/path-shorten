!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pathShorten=e()}}(function(){return function i(f,s,u){function l(n,e){if(!s[n]){if(!f[n]){var r="function"==typeof require&&require;if(!e&&r)return r(n,!0);if(c)return c(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var t=s[n]={exports:{}};f[n][0].call(t.exports,function(e){return l(f[n][1][e]||e)},t,t.exports,i,f,s,u)}return s[n].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,n,r){"use strict";var o=!1;try{o=e("os").homedir()}catch(e){}function v(e){process.env.debug_path_shorten&&console.log(e)}var s={home:!0,homedir:o,length:3};n.exports=function(e,p){p=Object.assign({},s,p||{});var t=e,i="";function n(){var e=t.match(/\s+/);if(e){var n=e[0],r=e.index;if(0<r){var o=t.slice(0,r);t=t.slice(o.length+n.length),i+=f(o)+n}else{if(0!==r)throw new Error("no match found should have already been handled bfore reaching here");t=t.slice(n.length),i+=n}}else t&&(i+=f(t)),t="";return t}for(p.home&&p.homedir&&(t=e.split(p.homedir).join("~"));n(););function f(e){if("function"==typeof p.processWord)return p.processWord(e);if(0<=e.indexOf("/")||0<=e.indexOf("\\")){v("word: "+(e=e.split("\\\\").join("/")));for(var n="";e[0].match(/['"]/);)n+=e[0],e=e.slice(1);if(0<e.indexOf(":/")){for(var r=e.indexOf(":/"),o=e.slice(0,r),t=o;!t[0].match(/[a-zA-Z]/);)v("drive: "+(t=o.slice(o.length-t.length+1)));var i="string"==typeof t&&t.match(/[a-zA-Z]/);-1===o.indexOf("/")&&i&&(n+=t.toLowerCase()+"/",e=e.slice(r+2))}var f=e.split("/");if(1<f.length){var s=f.shift(),u=f.join("/");e=s+"/"+(d=u.split("/"),h=[],d.forEach(function(e){".."===e?h.pop():"."===e||e&&h.push(e)}),h.join("/"))}for(;1<e.length&&"/"===e[e.length-1];)e=e.slice(0,-1);if("function"==typeof p.pre)return p.pre(n+e);var l=e.split("/"),c=l.pop(),a="";return l.forEach(function(e){if(e){if(0<=e.indexOf(":"))return a+=e+"/";var n,r=p.length;for("~"!==e[0]&&"."!==e[0]||(r+=1),r>e.length&&(r=e.length),n=0;n<r;n++)a+=e[n];a+="/"}}),"/"===e[0]&&a[0]!==e[0]&&(a="/"+a),n&&(a=n+a),"function"==typeof p.post?p.post(a+c):a+c}var d,h;return e}return i}},{os:void 0}]},{},[1])(1)});